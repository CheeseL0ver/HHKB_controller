EESchema Schematic File Version 2
LIBS:keyboard_parts
LIBS:HHKB_controller-cache
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:special
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:open-project
LIBS:HHKB_controller-cache
EELAYER 24 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 2
Title "HHKB Alt Controller"
Date "2014/03"
Rev "B"
Comp "TMK"
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Text Label 1650 1700 0    60   ~ 0
D+
Text Label 1650 1600 0    60   ~ 0
D-
Text Label 3400 1500 0    60   ~ 0
VUSB
Text Label 1400 2525 0    60   ~ 0
GND
Text Label 1450 2625 0    60   ~ 0
D+
Text Label 1450 2725 0    60   ~ 0
D-
Text Label 1350 2825 0    60   ~ 0
VUSB_RAW
Text Label 5400 1400 0    60   ~ 0
PE6
Text Label 5400 2400 0    60   ~ 0
PB3
Text Label 5400 2300 0    60   ~ 0
PB2
Text Label 5400 2200 0    60   ~ 0
PB1
Text Label 5400 2500 0    60   ~ 0
PB7
Text Label 5400 2100 0    60   ~ 0
PB0
Text Label 8100 3200 2    60   ~ 0
PD6
Text Label 8100 3300 2    60   ~ 0
PD4
Text Label 8100 3100 2    60   ~ 0
PD7
Text Label 8100 3000 2    60   ~ 0
PB4
Text Label 8100 2900 2    60   ~ 0
PB5
Text Label 8100 2800 2    60   ~ 0
PB6
Text Label 8100 2700 2    60   ~ 0
PC6
Text Label 8100 2600 2    60   ~ 0
PC7
Text Label 8100 2200 2    60   ~ 0
PF7
Text Label 8100 2100 2    60   ~ 0
PF6
Text Label 8100 2000 2    60   ~ 0
PF5
Text Label 8100 1900 2    60   ~ 0
PF4
Text Label 8100 1800 2    60   ~ 0
PF1
Text Label 8100 1700 2    60   ~ 0
PF0
Text Label 8100 1600 2    60   ~ 0
AREF
Text Label 5350 3500 0    60   ~ 0
PD5
Text Label 5350 3400 0    60   ~ 0
PD3
Text Label 5350 3300 0    60   ~ 0
PD2
Text Label 5350 3200 0    60   ~ 0
PD1
Text Label 5350 3100 0    60   ~ 0
PD0
$Comp
L GND #PWR01
U 1 1 4EBA913C
P 3950 3850
F 0 "#PWR01" H 3950 3850 30  0001 C CNN
F 1 "GND" H 3950 3780 30  0001 C CNN
F 2 "" H 3950 3850 60  0001 C CNN
F 3 "" H 3950 3850 60  0001 C CNN
	1    3950 3850
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR02
U 1 1 4EBA35B3
P 8450 3850
F 0 "#PWR02" H 8450 3850 30  0001 C CNN
F 1 "GND" H 8450 3780 30  0001 C CNN
F 2 "" H 8450 3850 60  0001 C CNN
F 3 "" H 8450 3850 60  0001 C CNN
	1    8450 3850
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR03
U 1 1 4EBA3599
P 8950 3850
F 0 "#PWR03" H 8950 3850 30  0001 C CNN
F 1 "GND" H 8950 3780 30  0001 C CNN
F 2 "" H 8950 3850 60  0001 C CNN
F 3 "" H 8950 3850 60  0001 C CNN
	1    8950 3850
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR04
U 1 1 4EBA3538
P 1900 2100
F 0 "#PWR04" H 1900 2100 30  0001 C CNN
F 1 "GND" H 1900 2030 30  0001 C CNN
F 2 "" H 1900 2100 60  0001 C CNN
F 3 "" H 1900 2100 60  0001 C CNN
	1    1900 2100
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR05
U 1 1 4EBA3506
P 8700 3850
F 0 "#PWR05" H 8700 3850 30  0001 C CNN
F 1 "GND" H 8700 3780 30  0001 C CNN
F 2 "" H 8700 3850 60  0001 C CNN
F 3 "" H 8700 3850 60  0001 C CNN
	1    8700 3850
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR06
U 1 1 4EBA3501
P 8200 3850
F 0 "#PWR06" H 8200 3850 30  0001 C CNN
F 1 "GND" H 8200 3780 30  0001 C CNN
F 2 "" H 8200 3850 60  0001 C CNN
F 3 "" H 8200 3850 60  0001 C CNN
	1    8200 3850
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR07
U 1 1 4EBA34E8
P 7900 3850
F 0 "#PWR07" H 7900 3850 30  0001 C CNN
F 1 "GND" H 7900 3780 30  0001 C CNN
F 2 "" H 7900 3850 60  0001 C CNN
F 3 "" H 7900 3850 60  0001 C CNN
	1    7900 3850
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR08
U 1 1 4EBA3454
P 4950 3850
F 0 "#PWR08" H 4950 3850 30  0001 C CNN
F 1 "GND" H 4950 3780 30  0001 C CNN
F 2 "" H 4950 3850 60  0001 C CNN
F 3 "" H 4950 3850 60  0001 C CNN
	1    4950 3850
	1    0    0    -1  
$EndComp
$Comp
L ATMEGA32U4 U1
U 1 1 4EB8BB68
P 6700 2450
F 0 "U1" H 6700 1200 60  0000 C CNN
F 1 "ATMEGA32U4" H 6700 3700 60  0000 C CNN
F 2 "" H 6700 2450 60  0001 C CNN
F 3 "" H 6700 2450 60  0001 C CNN
	1    6700 2450
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR09
U 1 1 4EBA2BA0
P 8200 1000
F 0 "#PWR09" H 8200 970 20  0001 C CNN
F 1 "+5V" H 8200 1110 30  0000 C CNN
F 2 "" H 8200 1000 60  0001 C CNN
F 3 "" H 8200 1000 60  0001 C CNN
	1    8200 1000
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR010
U 1 1 4EBA2B28
P 3700 2300
F 0 "#PWR010" H 3700 2270 20  0001 C CNN
F 1 "+5V" H 3700 2410 30  0000 C CNN
F 2 "" H 3700 2300 60  0001 C CNN
F 3 "" H 3700 2300 60  0001 C CNN
	1    3700 2300
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR011
U 1 1 4EB8CC7B
P 2750 3450
F 0 "#PWR011" H 2750 3420 20  0001 C CNN
F 1 "+5V" H 2750 3560 30  0000 C CNN
F 2 "" H 2750 3450 60  0001 C CNN
F 3 "" H 2750 3450 60  0001 C CNN
	1    2750 3450
	1    0    0    -1  
$EndComp
$Comp
L C C4
U 1 1 4EB8BB67
P 4150 2150
F 0 "C4" H 4200 2250 50  0000 L CNN
F 1 "1u" H 4200 2050 50  0000 L CNN
F 2 "" H 4150 2150 60  0001 C CNN
F 3 "" H 4150 2150 60  0001 C CNN
	1    4150 2150
	1    0    0    -1  
$EndComp
$Comp
L C C1
U 1 1 4EB8BB66
P 2200 2200
F 0 "C1" H 2250 2300 50  0000 L CNN
F 1 "10u" H 2250 2100 50  0000 L CNN
F 2 "" H 2200 2200 60  0001 C CNN
F 3 "" H 2200 2200 60  0001 C CNN
	1    2200 2200
	1    0    0    -1  
$EndComp
$Comp
L C C7
U 1 1 4EB8BB65
P 8200 3600
F 0 "C7" H 8250 3700 50  0000 L CNN
F 1 "0.1u" H 8250 3500 50  0000 L CNN
F 2 "" H 8200 3600 60  0001 C CNN
F 3 "" H 8200 3600 60  0001 C CNN
	1    8200 3600
	1    0    0    -1  
$EndComp
$Comp
L C C8
U 1 1 4EB8BB64
P 8450 3600
F 0 "C8" H 8500 3700 50  0000 L CNN
F 1 "0.1u" H 8500 3500 50  0000 L CNN
F 2 "" H 8450 3600 60  0001 C CNN
F 3 "" H 8450 3600 60  0001 C CNN
	1    8450 3600
	1    0    0    -1  
$EndComp
$Comp
L C C9
U 1 1 4EB8BB63
P 8700 3600
F 0 "C9" H 8750 3700 50  0000 L CNN
F 1 "0.1u" H 8750 3500 50  0000 L CNN
F 2 "" H 8700 3600 60  0001 C CNN
F 3 "" H 8700 3600 60  0001 C CNN
	1    8700 3600
	1    0    0    -1  
$EndComp
$Comp
L R R2
U 1 1 4EB8BB62
P 2700 1600
F 0 "R2" V 2780 1600 50  0000 C CNN
F 1 "22" V 2700 1600 50  0000 C CNN
F 2 "" H 2700 1600 60  0001 C CNN
F 3 "" H 2700 1600 60  0001 C CNN
	1    2700 1600
	0    1    1    0   
$EndComp
$Comp
L R R3
U 1 1 4EB8BB61
P 2700 1700
F 0 "R3" V 2780 1700 50  0000 C CNN
F 1 "22" V 2700 1700 50  0000 C CNN
F 2 "" H 2700 1700 60  0001 C CNN
F 3 "" H 2700 1700 60  0001 C CNN
	1    2700 1700
	0    1    1    0   
$EndComp
$Comp
L R R4
U 1 1 4EB8BB60
P 8950 3550
F 0 "R4" V 9030 3550 50  0000 C CNN
F 1 "1k" V 8950 3550 50  0000 C CNN
F 2 "" H 8950 3550 60  0001 C CNN
F 3 "" H 8950 3550 60  0001 C CNN
	1    8950 3550
	-1   0    0    1   
$EndComp
$Comp
L SW_PUSH SW1
U 1 1 4EB8BB5F
P 4450 2600
F 0 "SW1" H 4600 2710 50  0000 C CNN
F 1 "SW_PUSH" H 4450 2520 50  0000 C CNN
F 2 "" H 4450 2600 60  0001 C CNN
F 3 "" H 4450 2600 60  0001 C CNN
	1    4450 2600
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR012
U 1 1 4EB8BB5A
P 3700 3850
F 0 "#PWR012" H 3700 3850 30  0001 C CNN
F 1 "GND" H 3700 3780 30  0001 C CNN
F 2 "" H 3700 3850 60  0001 C CNN
F 3 "" H 3700 3850 60  0001 C CNN
	1    3700 3850
	1    0    0    -1  
$EndComp
$Comp
L C C5
U 1 1 4EB8BB59
P 4350 3600
F 0 "C5" H 4400 3700 50  0000 L CNN
F 1 "22p" H 4400 3500 50  0000 L CNN
F 2 "" H 4350 3600 60  0001 C CNN
F 3 "" H 4350 3600 60  0001 C CNN
	1    4350 3600
	1    0    0    -1  
$EndComp
$Comp
L C C6
U 1 1 4EB8BB58
P 4950 3600
F 0 "C6" H 5000 3700 50  0000 L CNN
F 1 "22p" H 5000 3500 50  0000 L CNN
F 2 "" H 4950 3600 60  0001 C CNN
F 3 "" H 4950 3600 60  0001 C CNN
	1    4950 3600
	1    0    0    -1  
$EndComp
$Comp
L C C3
U 1 1 4EB8BB57
P 3700 3600
F 0 "C3" H 3750 3700 50  0000 L CNN
F 1 "0.1u" H 3750 3500 50  0000 L CNN
F 2 "" H 3700 3600 60  0001 C CNN
F 3 "" H 3700 3600 60  0001 C CNN
	1    3700 3600
	1    0    0    -1  
$EndComp
$Comp
L CRYSTAL X1
U 1 1 4EB8BB56
P 4650 3350
F 0 "X1" H 4650 3500 60  0000 C CNN
F 1 "16MHz" H 4650 3200 60  0000 C CNN
F 2 "" H 4650 3350 60  0001 C CNN
F 3 "" H 4650 3350 60  0001 C CNN
	1    4650 3350
	1    0    0    -1  
$EndComp
Text Label 5350 2600 0    60   ~ 0
~RESET
$Comp
L GND #PWR013
U 1 1 4EB8BB49
P 4150 2400
F 0 "#PWR013" H 4150 2400 30  0001 C CNN
F 1 "GND" H 4150 2330 30  0001 C CNN
F 2 "" H 4150 2400 60  0001 C CNN
F 3 "" H 4150 2400 60  0001 C CNN
	1    4150 2400
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR014
U 1 1 4EB8BB48
P 4150 3850
F 0 "#PWR014" H 4150 3850 30  0001 C CNN
F 1 "GND" H 4150 3780 30  0001 C CNN
F 2 "" H 4150 3850 60  0001 C CNN
F 3 "" H 4150 3850 60  0001 C CNN
	1    4150 3850
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR015
U 1 1 4EB8BB47
P 4350 3850
F 0 "#PWR015" H 4350 3850 30  0001 C CNN
F 1 "GND" H 4350 3780 30  0001 C CNN
F 2 "" H 4350 3850 60  0001 C CNN
F 3 "" H 4350 3850 60  0001 C CNN
	1    4350 3850
	1    0    0    -1  
$EndComp
$Comp
L CONN_1 P5
U 1 1 517F61E2
P 10500 5750
F 0 "P5" H 10580 5750 40  0000 L CNN
F 1 "CONN_1" H 10500 5805 30  0001 C CNN
F 2 "" H 10500 5750 60  0000 C CNN
F 3 "" H 10500 5750 60  0000 C CNN
	1    10500 5750
	-1   0    0    1   
$EndComp
$Comp
L CONN_1 P1
U 1 1 517F625F
P 1150 2525
F 0 "P1" H 1230 2525 40  0000 L CNN
F 1 "CONN_1" H 1150 2580 30  0001 C CNN
F 2 "" H 1150 2525 60  0000 C CNN
F 3 "" H 1150 2525 60  0000 C CNN
	1    1150 2525
	-1   0    0    1   
$EndComp
$Comp
L CONN_1 P2
U 1 1 517F6275
P 1150 2625
F 0 "P2" H 1230 2625 40  0000 L CNN
F 1 "CONN_1" H 1150 2680 30  0001 C CNN
F 2 "" H 1150 2625 60  0000 C CNN
F 3 "" H 1150 2625 60  0000 C CNN
	1    1150 2625
	-1   0    0    1   
$EndComp
$Comp
L CONN_1 P3
U 1 1 517F6290
P 1150 2725
F 0 "P3" H 1230 2725 40  0000 L CNN
F 1 "CONN_1" H 1150 2780 30  0001 C CNN
F 2 "" H 1150 2725 60  0000 C CNN
F 3 "" H 1150 2725 60  0000 C CNN
	1    1150 2725
	-1   0    0    1   
$EndComp
$Comp
L CONN_1 P4
U 1 1 517F629F
P 1150 2825
F 0 "P4" H 1230 2825 40  0000 L CNN
F 1 "CONN_1" H 1150 2880 30  0001 C CNN
F 2 "" H 1150 2825 60  0000 C CNN
F 3 "" H 1150 2825 60  0000 C CNN
	1    1150 2825
	-1   0    0    1   
$EndComp
Text Notes 900  3000 0    60   Italic 0
USB pinouts for external connector
Text Notes 4350 2200 0    60   Italic 0
Ucap +/-10%
Text Notes 2500 1900 0    60   Italic 0
+/-5%
$Comp
L LED D1
U 1 1 51863503
P 9450 3000
F 0 "D1" H 9450 3100 50  0000 C CNN
F 1 "LED" H 9450 2900 50  0000 C CNN
F 2 "" H 9450 3000 60  0000 C CNN
F 3 "" H 9450 3000 60  0000 C CNN
	1    9450 3000
	0    1    1    0   
$EndComp
$Comp
L R R5
U 1 1 51863512
P 9450 3550
F 0 "R5" V 9530 3550 50  0000 C CNN
F 1 "1K" V 9450 3550 50  0000 C CNN
F 2 "" H 9450 3550 60  0000 C CNN
F 3 "" H 9450 3550 60  0000 C CNN
	1    9450 3550
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR016
U 1 1 51863521
P 9450 3850
F 0 "#PWR016" H 9450 3850 30  0001 C CNN
F 1 "GND" H 9450 3780 30  0001 C CNN
F 2 "" H 9450 3850 60  0000 C CNN
F 3 "" H 9450 3850 60  0000 C CNN
	1    9450 3850
	1    0    0    -1  
$EndComp
Text Label 9250 2700 0    60   Italic 0
PD6
Text Notes 9250 4100 0    60   Italic 0
Optional\nTeensy compatible LED
$Comp
L CONN_13 CN2
U 1 1 51978C41
P 1950 6450
F 0 "CN2" V 1910 6450 60  0000 C CNN
F 1 "CONN_13" V 2020 6450 60  0000 C CNN
F 2 "" H 1950 6450 60  0000 C CNN
F 3 "" H 1950 6450 60  0000 C CNN
	1    1950 6450
	-1   0    0    -1  
$EndComp
Text Notes 1800 7550 0    60   Italic 0
JST ZH for Pro2
Text Label 2550 6250 0    60   Italic 0
PB0
Text Label 2550 6350 0    60   Italic 0
PB1
Text Label 2550 6450 0    60   Italic 0
PB2
Text Label 2550 6550 0    60   Italic 0
PB3
Text Label 2550 6650 0    60   Italic 0
PB4
Text Label 2550 6750 0    60   Italic 0
PB5
Text Label 2550 6850 0    60   Italic 0
PB6
Text Label 2550 6150 0    60   Italic 0
PB7
Text Label 2550 6050 0    60   Italic 0
PD7
Text Notes 2850 6050 0    60   Italic 0
KEY state
Text Notes 2850 6150 0    60   Italic 0
HYSTERESIS
Text Notes 2850 6250 0    60   Italic 0
ROW bit0
Text Notes 2850 6350 0    60   Italic 0
ROW bit1
Text Notes 2850 6450 0    60   Italic 0
ROW bit2
Text Notes 2850 6550 0    60   Italic 0
COL bit0
Text Notes 2850 6650 0    60   Italic 0
COL bit1
Text Notes 2850 6750 0    60   Italic 0
COL bit2
Text Notes 2850 6850 0    60   Italic 0
COL enable
Text Label 10950 5750 2    60   ~ 0
PD1
$Comp
L CONN_1 P6
U 1 1 517F61D5
P 10500 5850
F 0 "P6" H 10580 5850 40  0000 L CNN
F 1 "CONN_1" H 10500 5905 30  0001 C CNN
F 2 "" H 10500 5850 60  0000 C CNN
F 3 "" H 10500 5850 60  0000 C CNN
	1    10500 5850
	-1   0    0    1   
$EndComp
Text Label 10950 5850 2    60   ~ 0
PD0
$Comp
L CONN_15 CN1
U 1 1 51979D97
P 900 6450
F 0 "CN1" V 870 6500 60  0000 C CNN
F 1 "CONN_15" V 980 6500 60  0000 C CNN
F 2 "" H 900 6500 60  0000 C CNN
F 3 "" H 900 6500 60  0000 C CNN
	1    900  6450
	-1   0    0    -1  
$EndComp
Text Label 1500 6150 0    60   Italic 0
PB0
Text Label 1500 6250 0    60   Italic 0
PB1
Text Label 1500 6350 0    60   Italic 0
PB2
Text Label 1500 6450 0    60   Italic 0
PB3
Text Label 1500 6550 0    60   Italic 0
PB4
Text Label 1500 6650 0    60   Italic 0
PB5
Text Label 1500 6750 0    60   Italic 0
PB6
Text Label 1500 6050 0    60   Italic 0
PB7
Text Label 1500 5950 0    60   Italic 0
PD7
$Comp
L +5V #PWR017
U 1 1 51979DCA
P 3300 5450
F 0 "#PWR017" H 3300 5420 20  0001 C CNN
F 1 "+5V" H 3300 5560 30  0000 C CNN
F 2 "" H 3300 5450 60  0000 C CNN
F 3 "" H 3300 5450 60  0000 C CNN
	1    3300 5450
	1    0    0    -1  
$EndComp
Text Notes 650  7550 0    60   Italic 0
Hirose DF14A for JP
$Comp
L +5V #PWR018
U 1 1 519EBD1D
P 5200 1000
F 0 "#PWR018" H 5200 970 20  0001 C CNN
F 1 "+5V" H 5200 1110 30  0000 C CNN
F 2 "" H 5200 1000 60  0001 C CNN
F 3 "" H 5200 1000 60  0001 C CNN
	1    5200 1000
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR019
U 1 1 51A7ECC5
P 3750 6900
F 0 "#PWR019" H 3750 6990 20  0001 C CNN
F 1 "+5V" H 3750 6990 30  0000 C CNN
F 2 "" H 3750 6900 60  0000 C CNN
F 3 "" H 3750 6900 60  0000 C CNN
	1    3750 6900
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR020
U 1 1 51A7ECD4
P 3750 7400
F 0 "#PWR020" H 3750 7400 30  0001 C CNN
F 1 "GND" H 3750 7330 30  0001 C CNN
F 2 "" H 3750 7400 60  0000 C CNN
F 3 "" H 3750 7400 60  0000 C CNN
	1    3750 7400
	1    0    0    -1  
$EndComp
$Comp
L C C2
U 1 1 51A7ECF4
P 3750 7150
F 0 "C2" H 3750 7250 40  0000 L CNN
F 1 "10u" H 3756 7065 40  0000 L CNN
F 2 "" H 3788 7000 30  0000 C CNN
F 3 "" H 3750 7150 60  0000 C CNN
	1    3750 7150
	1    0    0    -1  
$EndComp
Text Notes 3550 7600 0    60   Italic 0
Optional
Text Label 5400 2000 0    60   Italic 0
VUSB
Text Label 1650 1900 0    60   Italic 0
GND
$Comp
L GND #PWR021
U 1 1 51A7FC37
P 2200 2450
F 0 "#PWR021" H 2200 2450 30  0001 C CNN
F 1 "GND" H 2200 2380 30  0001 C CNN
F 2 "" H 2200 2450 60  0000 C CNN
F 3 "" H 2200 2450 60  0000 C CNN
	1    2200 2450
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR022
U 1 1 51A7FC46
P 2200 1950
F 0 "#PWR022" H 2200 2040 20  0001 C CNN
F 1 "+5V" H 2200 2040 30  0000 C CNN
F 2 "" H 2200 1950 60  0000 C CNN
F 3 "" H 2200 1950 60  0000 C CNN
	1    2200 1950
	1    0    0    -1  
$EndComp
Text Notes 9950 7000 0    60   Italic 0
ICSP
$Comp
L CONN_3X2 P8
U 1 1 51A80544
P 10050 6700
F 0 "P8" H 10050 6900 50  0000 C CNN
F 1 "CONN_3X2" V 10050 6700 40  0000 C CNN
F 2 "" H 10050 6650 60  0000 C CNN
F 3 "" H 10050 6650 60  0000 C CNN
	1    10050 6700
	1    0    0    -1  
$EndComp
Text Label 9350 6600 0    60   Italic 0
PB3
Text Label 9350 6700 0    60   Italic 0
PB1
Text Label 9350 6800 0    60   Italic 0
~RESET
Text Label 10550 6700 0    60   Italic 0
PB2
Text Label 10550 6800 0    60   Italic 0
GND
Text Label 10550 6600 0    60   Italic 0
+5V
Text Notes 10800 6600 0    60   ~ 0
VTG
Text Notes 10800 6700 0    60   ~ 0
MOSI
Text Notes 9100 6600 0    60   ~ 0
MISO
Text Notes 9100 6700 0    60   ~ 0
SCK
Text Notes 9100 6800 0    60   ~ 0
RST
Text Notes 10800 6800 0    60   ~ 0
GND
$Comp
L C C10
U 1 1 51AD4FB4
P 9450 1900
F 0 "C10" H 9500 2000 50  0000 L CNN
F 1 "0.1u" H 9500 1800 50  0000 L CNN
F 2 "" H 9450 1900 60  0000 C CNN
F 3 "" H 9450 1900 60  0000 C CNN
	1    9450 1900
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR023
U 1 1 51AD5139
P 9450 2200
F 0 "#PWR023" H 9450 2200 30  0001 C CNN
F 1 "GND" H 9450 2130 30  0001 C CNN
F 2 "" H 9450 2200 60  0000 C CNN
F 3 "" H 9450 2200 60  0000 C CNN
	1    9450 2200
	1    0    0    -1  
$EndComp
Text Label 9250 1550 0    60   ~ 0
AREF
$Sheet
S 5850 6850 1150 850 
U 51AFD396
F0 "bluetooth" 50
F1 "bluetooth.sch" 50
$EndSheet
Text GLabel 4050 1500 2    60   Input ~ 0
VUSB
Text GLabel 4050 1200 2    60   Input ~ 0
5V_BOOST
Text GLabel 6650 6150 2    60   Input ~ 0
BT_RX
Text GLabel 6650 6000 2    60   Input ~ 0
BT_TX
Text Label 6450 6150 2    60   ~ 0
PD3
Text Label 6450 6000 2    60   ~ 0
PD2
Text Notes 6800 5750 2    60   ~ 0
Bluetooth Extension
$Comp
L CONN_1 P7
U 1 1 51B4469E
P 10500 5950
F 0 "P7" H 10580 5950 40  0000 L CNN
F 1 "CONN_1" H 10500 6005 30  0001 C CNN
F 2 "" H 10500 5950 60  0000 C CNN
F 3 "" H 10500 5950 60  0000 C CNN
	1    10500 5950
	-1   0    0    1   
$EndComp
Text Label 10950 5950 2    60   ~ 0
GND
Text Notes 10900 6150 2    60   ~ 0
For Debug
NoConn ~ 7800 2200
NoConn ~ 7800 2100
NoConn ~ 7800 2000
NoConn ~ 7800 1900
Text GLabel 6650 6500 2    60   Input ~ 0
BT_RTS
Text Label 6450 6650 2    60   ~ 0
PD5
$Comp
L USB_MINI_MICRO_B J1
U 1 1 51B937B1
P 1450 1650
F 0 "J1" H 1050 1600 60  0000 C CNN
F 1 "USB_MINI_MICRO_B" H 1300 1900 60  0001 C CNN
F 2 "" H 1400 1650 60  0000 C CNN
F 3 "" H 1400 1650 60  0000 C CNN
	1    1450 1650
	1    0    0    -1  
$EndComp
NoConn ~ 1600 1800
$Comp
L MOSFET_N Q2
U 1 1 51BB4B25
P 4700 5900
F 0 "Q2" H 4710 6070 60  0000 R CNN
F 1 "MOSFET_N" H 4710 5750 60  0000 R CNN
F 2 "" H 4700 5900 60  0000 C CNN
F 3 "" H 4700 5900 60  0000 C CNN
	1    4700 5900
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR024
U 1 1 51BB4B45
P 4800 6250
F 0 "#PWR024" H 4800 6250 30  0001 C CNN
F 1 "GND" H 4800 6180 30  0001 C CNN
F 2 "" H 4800 6250 60  0000 C CNN
F 3 "" H 4800 6250 60  0000 C CNN
	1    4800 6250
	1    0    0    -1  
$EndComp
$Comp
L R R15
U 1 1 51BB4BFA
P 4300 5650
F 0 "R15" V 4380 5650 50  0000 C CNN
F 1 "10K" V 4300 5650 50  0000 C CNN
F 2 "" H 4300 5650 60  0000 C CNN
F 3 "" H 4300 5650 60  0000 C CNN
	1    4300 5650
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR025
U 1 1 51BB4C0E
P 4300 5300
F 0 "#PWR025" H 4300 5390 20  0001 C CNN
F 1 "+5V" H 4300 5390 30  0000 C CNN
F 2 "" H 4300 5300 60  0000 C CNN
F 3 "" H 4300 5300 60  0000 C CNN
	1    4300 5300
	1    0    0    -1  
$EndComp
Text Notes 3750 6400 0    60   ~ 0
HHKB Matrix Power Control
Text Label 4850 5550 0    60   ~ 0
HHKB_GND
Text Label 3600 5900 0    60   ~ 0
PD4
Text Label 2900 7300 0    60   ~ 0
HHKB_GND
Text Notes 3650 5650 0    60   Italic 0
Normally On\nLow = Off
$Comp
L JUMPER JP11
U 1 1 51BB5493
P 2900 5600
F 0 "JP11" H 2900 5750 60  0000 C CNN
F 1 "JUMPER" H 2900 5520 40  0000 C CNN
F 2 "" H 2900 5600 60  0000 C CNN
F 3 "" H 2900 5600 60  0000 C CNN
	1    2900 5600
	1    0    0    -1  
$EndComp
$Comp
L CONN_1 P9
U 1 1 51BB5A44
P 2600 5450
F 0 "P9" H 2680 5450 40  0000 L CNN
F 1 "CONN_1" H 2600 5505 30  0001 C CNN
F 2 "" H 2600 5450 60  0000 C CNN
F 3 "" H 2600 5450 60  0000 C CNN
	1    2600 5450
	0    -1   -1   0   
$EndComp
$Comp
L CONN_1 P10
U 1 1 51BB5A53
P 3200 5450
F 0 "P10" H 3280 5450 40  0000 L CNN
F 1 "CONN_1" H 3200 5505 30  0001 C CNN
F 2 "" H 3200 5450 60  0000 C CNN
F 3 "" H 3200 5450 60  0000 C CNN
	1    3200 5450
	0    -1   -1   0   
$EndComp
Text Notes 2600 5850 0    60   ~ 0
Amp Measure
$Comp
L JUMPER JP3
U 1 1 51BC02F3
P 5100 5900
F 0 "JP3" H 5100 6050 60  0000 C CNN
F 1 "JUMPER" H 5100 5820 40  0000 C CNN
F 2 "" H 5100 5900 60  0000 C CNN
F 3 "" H 5100 5900 60  0000 C CNN
	1    5100 5900
	0    -1   -1   0   
$EndComp
Text GLabel 7900 6150 2    60   Input ~ 0
LIPO_SENSE
Text Label 7700 6150 2    60   ~ 0
PF0
$Comp
L GND #PWR026
U 1 1 52AACE12
P 5100 6250
F 0 "#PWR026" H 5100 6250 30  0001 C CNN
F 1 "GND" H 5100 6180 30  0001 C CNN
F 2 "" H 5100 6250 60  0000 C CNN
F 3 "" H 5100 6250 60  0000 C CNN
	1    5100 6250
	1    0    0    -1  
$EndComp
Text Label 1500 7050 0    60   ~ 0
PC6
Text Label 1500 7150 0    60   ~ 0
PC7
$Comp
L JUMPER JP1
U 1 1 53101A26
P 2300 1200
F 0 "JP1" H 2300 1350 60  0000 C CNN
F 1 "JUMPER" H 2300 1120 40  0000 C CNN
F 2 "" H 2300 1200 60  0000 C CNN
F 3 "" H 2300 1200 60  0000 C CNN
	1    2300 1200
	1    0    0    -1  
$EndComp
$Comp
L JUMPER JP2
U 1 1 5310256F
P 3200 1200
F 0 "JP2" H 3200 1350 60  0000 C CNN
F 1 "JUMPER" H 3200 1120 40  0000 C CNN
F 2 "" H 3200 1200 60  0000 C CNN
F 3 "" H 3200 1200 60  0000 C CNN
	1    3200 1200
	1    0    0    -1  
$EndComp
$Comp
L PWR_FLAG #FLG027
U 1 1 53142972
P 3850 1450
F 0 "#FLG027" H 3850 1545 30  0001 C CNN
F 1 "PWR_FLAG" H 3850 1630 30  0000 C CNN
F 2 "" H 3850 1450 60  0000 C CNN
F 3 "" H 3850 1450 60  0000 C CNN
	1    3850 1450
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR028
U 1 1 4EBBEF66
P 10950 3900
F 0 "#PWR028" H 10950 3900 30  0001 C CNN
F 1 "GND" H 10950 3830 30  0001 C CNN
F 2 "" H 10950 3900 60  0001 C CNN
F 3 "" H 10950 3900 60  0001 C CNN
	1    10950 3900
	1    0    0    -1  
$EndComp
$Comp
L PWR_FLAG #FLG029
U 1 1 4EBBEFCE
P 10950 3900
F 0 "#FLG029" H 10950 4170 30  0001 C CNN
F 1 "PWR_FLAG" H 10950 4130 30  0000 C CNN
F 2 "" H 10950 3900 60  0001 C CNN
F 3 "" H 10950 3900 60  0001 C CNN
	1    10950 3900
	1    0    0    -1  
$EndComp
$Comp
L PPTC PPTC1
U 1 1 53153E30
P 2300 1500
F 0 "PPTC1" H 2250 1600 50  0000 C CNN
F 1 "PPTC" H 2300 1400 50  0000 C CNN
F 2 "" V 2300 1500 60  0000 C CNN
F 3 "" V 2300 1500 60  0000 C CNN
	1    2300 1500
	1    0    0    -1  
$EndComp
Text GLabel 6650 6650 2    60   Input ~ 0
BT_CTS
Text Label 6450 6500 2    60   ~ 0
PF1
Text GLabel 7900 5950 2    60   Input ~ 0
BT_INDICATOR
Text Label 7700 5950 2    60   ~ 0
PE6
Text Notes 4850 6100 0    60   ~ 0
No Power Control
Text Notes 2150 950  0    60   ~ 0
No PPTC
Text Notes 3050 950  0    60   ~ 0
No Boost
Text Notes 650  4200 0    60   ~ 0
USB keyboard configurations:\n  1)Close "No Power Control" and\n  3)close "No Boost" jumper to use raw USB power.\n  Optionally you can boost into 5V\n  with making "No Boost" open and "No LIPO" closed.
Text Notes 650  5150 0    60   ~ 0
HHKB Matrix Interface
Text Notes 9050 5650 0    60   ~ 0
Program and Debug
Text Label 3850 1000 0    60   ~ 0
5V_SOURCE
Text Label 1650 1500 0    60   ~ 0
VUSB_RAW
$Comp
L JUMPER JP10
U 1 1 531E82DA
P 2200 3550
F 0 "JP10" H 2200 3700 60  0000 C CNN
F 1 "JUMPER" H 2200 3470 40  0000 C CNN
F 2 "" H 2200 3550 60  0000 C CNN
F 3 "" H 2200 3550 60  0000 C CNN
	1    2200 3550
	1    0    0    -1  
$EndComp
Wire Wire Line
	1300 2825 1600 2825
Wire Wire Line
	1300 2725 1600 2725
Wire Wire Line
	1300 2625 1600 2625
Wire Wire Line
	1300 2525 1600 2525
Wire Wire Line
	10650 5750 10950 5750
Wire Wire Line
	5650 1400 5400 1400
Wire Wire Line
	7800 3200 8100 3200
Wire Wire Line
	7800 2200 8100 2200
Wire Wire Line
	7800 2100 8100 2100
Wire Wire Line
	7800 2000 8100 2000
Wire Wire Line
	7800 1900 8100 1900
Wire Wire Line
	7800 1800 8100 1800
Wire Wire Line
	7800 1700 8100 1700
Wire Wire Line
	7800 1600 8100 1600
Wire Wire Line
	5650 3300 5350 3300
Wire Wire Line
	5650 3500 5350 3500
Wire Wire Line
	5650 2500 5400 2500
Connection ~ 7900 2300
Wire Wire Line
	7800 1500 7900 1500
Wire Wire Line
	3950 1800 3950 3850
Wire Wire Line
	5650 2700 3700 2700
Wire Wire Line
	5650 3400 5350 3400
Wire Wire Line
	4150 2600 4150 3850
Wire Wire Line
	4150 2350 4150 2400
Connection ~ 3700 2700
Wire Wire Line
	3950 1800 5650 1800
Wire Wire Line
	8200 3850 8200 3800
Wire Wire Line
	8700 3800 8700 3850
Connection ~ 4350 3350
Wire Wire Line
	4350 2900 4350 3400
Wire Wire Line
	4350 2900 5650 2900
Wire Wire Line
	4750 2600 5650 2600
Wire Wire Line
	8950 3300 8950 2500
Wire Wire Line
	8950 2500 7800 2500
Wire Wire Line
	7800 2400 8450 2400
Connection ~ 8200 1400
Connection ~ 8200 3400
Wire Wire Line
	2950 1600 5650 1600
Wire Wire Line
	2450 1700 1600 1700
Wire Wire Line
	2450 1600 1600 1600
Wire Wire Line
	5650 1700 2950 1700
Wire Wire Line
	8200 1000 8200 3400
Wire Wire Line
	8200 3400 7800 3400
Connection ~ 8200 2400
Wire Wire Line
	8450 2400 8450 3400
Wire Wire Line
	7800 1400 8700 1400
Wire Wire Line
	8700 1400 8700 3400
Wire Wire Line
	5650 3000 4950 3000
Wire Wire Line
	4950 3000 4950 3400
Connection ~ 4950 3350
Wire Wire Line
	5650 1900 4150 1900
Wire Wire Line
	4150 1900 4150 1950
Wire Wire Line
	3700 3800 3700 3850
Wire Wire Line
	8450 3850 8450 3800
Wire Wire Line
	3950 2800 5650 2800
Connection ~ 3950 2800
Wire Wire Line
	5400 2400 5650 2400
Wire Wire Line
	5650 2200 5400 2200
Wire Wire Line
	4350 3850 4350 3800
Wire Wire Line
	7900 1500 7900 3850
Wire Wire Line
	4950 3850 4950 3800
Wire Wire Line
	7900 2300 7800 2300
Wire Wire Line
	8950 3850 8950 3800
Wire Wire Line
	5650 2100 5400 2100
Wire Wire Line
	5650 3100 5350 3100
Wire Wire Line
	5650 3200 5350 3200
Wire Wire Line
	7800 3300 8100 3300
Wire Wire Line
	7800 2600 8100 2600
Wire Wire Line
	7800 2700 8100 2700
Wire Wire Line
	7800 2800 8100 2800
Wire Wire Line
	7800 2900 8100 2900
Wire Wire Line
	7800 3000 8100 3000
Wire Wire Line
	7800 3100 8100 3100
Wire Wire Line
	7800 3500 7900 3500
Connection ~ 7900 3500
Wire Wire Line
	5650 2300 5400 2300
Wire Wire Line
	9450 3300 9450 3200
Wire Wire Line
	9450 2800 9450 2700
Wire Wire Line
	9450 2700 9250 2700
Wire Wire Line
	9450 3850 9450 3800
Wire Wire Line
	2300 6950 2500 6950
Wire Wire Line
	2500 6950 2500 7300
Wire Wire Line
	2300 7050 2500 7050
Connection ~ 2500 7050
Wire Wire Line
	2500 5950 2300 5950
Wire Wire Line
	2500 5600 2500 5950
Wire Wire Line
	2300 5850 2500 5850
Connection ~ 2500 5850
Wire Wire Line
	2300 6050 2750 6050
Wire Wire Line
	2300 6150 2750 6150
Wire Wire Line
	2300 6250 2750 6250
Wire Wire Line
	2300 6350 2750 6350
Wire Wire Line
	2300 6450 2750 6450
Wire Wire Line
	2300 6550 2750 6550
Wire Wire Line
	2300 6650 2750 6650
Wire Wire Line
	2300 6750 2750 6750
Wire Wire Line
	2300 6850 2750 6850
Wire Wire Line
	10650 5850 10950 5850
Wire Wire Line
	1250 5950 1700 5950
Wire Wire Line
	1250 6050 1700 6050
Wire Wire Line
	1250 6150 1700 6150
Wire Wire Line
	1250 6250 1700 6250
Wire Wire Line
	1250 6350 1700 6350
Wire Wire Line
	1250 6450 1700 6450
Wire Wire Line
	1250 6550 1700 6550
Wire Wire Line
	1250 6650 1700 6650
Wire Wire Line
	1250 6750 1700 6750
Wire Wire Line
	1250 5750 1450 5750
Connection ~ 1450 5750
Wire Wire Line
	1250 5850 1450 5850
Wire Wire Line
	1450 6850 1450 7300
Wire Wire Line
	1250 6950 1450 6950
Wire Wire Line
	5200 1000 5200 1500
Wire Wire Line
	5200 1500 5650 1500
Wire Wire Line
	3750 6950 3750 6900
Wire Wire Line
	3750 7350 3750 7400
Wire Wire Line
	1600 1900 1900 1900
Wire Wire Line
	1900 1900 1900 2100
Wire Wire Line
	2200 1950 2200 2000
Wire Wire Line
	2200 2400 2200 2450
Wire Wire Line
	10450 6600 10750 6600
Wire Wire Line
	10450 6700 10750 6700
Wire Wire Line
	10450 6800 10750 6800
Wire Wire Line
	9650 6600 9350 6600
Wire Wire Line
	9650 6700 9350 6700
Wire Wire Line
	9650 6800 9350 6800
Wire Wire Line
	9250 1550 9450 1550
Wire Wire Line
	9450 1550 9450 1700
Wire Wire Line
	9450 2100 9450 2200
Wire Wire Line
	6650 6150 6250 6150
Wire Wire Line
	6650 6000 6250 6000
Wire Wire Line
	10650 5950 10950 5950
Wire Wire Line
	6650 6500 6250 6500
Wire Wire Line
	1600 2000 1900 2000
Connection ~ 1900 2000
Wire Wire Line
	4800 6250 4800 6100
Wire Wire Line
	4300 5300 4300 5400
Connection ~ 4300 5900
Wire Wire Line
	4800 5700 4800 5550
Wire Wire Line
	4800 5550 5300 5550
Wire Wire Line
	3600 5900 4500 5900
Wire Wire Line
	1450 7300 3400 7300
Connection ~ 2500 7300
Connection ~ 2500 5600
Wire Wire Line
	3300 5450 3300 5600
Wire Wire Line
	3300 5600 3200 5600
Wire Wire Line
	1450 5600 2600 5600
Wire Wire Line
	3200 5600 3200 5750
Wire Wire Line
	3200 5750 2600 5750
Connection ~ 3200 5600
Connection ~ 2600 5600
Wire Wire Line
	2600 5750 2600 5600
Wire Wire Line
	5100 5600 5100 5550
Connection ~ 5100 5550
Wire Wire Line
	7900 6150 7500 6150
Wire Wire Line
	5400 2000 5650 2000
Wire Wire Line
	5100 6200 5100 6250
Wire Wire Line
	1450 5850 1450 5600
Wire Wire Line
	1250 6850 1450 6850
Connection ~ 1450 6950
Wire Wire Line
	1250 7050 1700 7050
Wire Wire Line
	1250 7150 1700 7150
Wire Wire Line
	2000 1200 2000 1500
Connection ~ 2000 1500
Wire Wire Line
	2550 1500 4050 1500
Wire Wire Line
	2600 1200 2600 1500
Connection ~ 2600 1500
Wire Wire Line
	1600 1500 2050 1500
Wire Wire Line
	3500 1200 4050 1200
Wire Wire Line
	3700 2300 3700 3400
Wire Wire Line
	2700 1200 2700 1500
Connection ~ 2700 1500
Wire Wire Line
	2700 1200 2900 1200
Connection ~ 3850 1200
Wire Wire Line
	3850 1200 3850 1000
Wire Wire Line
	3850 1450 3850 1500
Connection ~ 3850 1500
Wire Wire Line
	6650 6650 6250 6650
Wire Wire Line
	7500 5950 7900 5950
Wire Notes Line
	600  5000 5750 5000
Wire Notes Line
	5750 5000 5750 7650
Wire Notes Line
	9000 6950 9000 5500
Wire Notes Line
	9000 5500 11100 5500
Wire Wire Line
	2750 3550 2500 3550
Wire Wire Line
	2750 3450 2750 3550
Wire Wire Line
	3850 1000 4350 1000
Text Label 1300 3550 0    60   ~ 0
5V_SOURCE
Wire Wire Line
	1900 3700 2500 3700
Connection ~ 2500 3550
Connection ~ 1900 3550
$Comp
L CONN_1 P11
U 1 1 531E8B36
P 1900 3400
F 0 "P11" H 1980 3400 40  0000 L CNN
F 1 "CONN_1" H 1900 3455 30  0001 C CNN
F 2 "" H 1900 3400 60  0000 C CNN
F 3 "" H 1900 3400 60  0000 C CNN
	1    1900 3400
	0    -1   -1   0   
$EndComp
Wire Wire Line
	1300 3550 1900 3550
Wire Wire Line
	1900 3550 1900 3700
Wire Wire Line
	2500 3700 2500 3550
$Comp
L CONN_1 P12
U 1 1 531E8D87
P 2500 3400
F 0 "P12" H 2580 3400 40  0000 L CNN
F 1 "CONN_1" H 2500 3455 30  0001 C CNN
F 2 "" H 2500 3400 60  0000 C CNN
F 3 "" H 2500 3400 60  0000 C CNN
	1    2500 3400
	0    -1   -1   0   
$EndComp
$EndSCHEMATC
